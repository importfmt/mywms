webpackJsonp([1],{"0Zec":function(e,t){},"1p0o":function(e,t){},"26iA":function(e,t){},"38Rh":function(e,t){},"7Dkb":function(e,t){},AyxB:function(e,t){},CEo3:function(e,t){},Djgc:function(e,t){},HNvb:function(e,t){},J373:function(e,t){},LVyx:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("7+uW"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n=r("VU/8")({name:"app"},s,!1,function(e){r("tBG6")},null,null).exports,o=r("zL8q"),i=r.n(o),l=(r("tvR6"),r("/ocq")),u=r("Xxa5"),c=r.n(u),d=r("exGp"),p=r.n(d),m={data:function(){return{loginForm:{mobile:"",password:"",user:{}},loginFormRules:{mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{min:11,max:11,message:"长度必须为11位",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"},{min:6,max:16,message:"长度在6到16个字符区间",trigger:"blur"}]}}},methods:{resetLoginFrom:function(){this.$refs.loginFormRef.resetFields()},verifyLoginInfo:function(){var e,t=this;this.$refs.loginFormRef.validate((e=p()(c.a.mark(function e(r){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.post("/login",t.loginForm);case 4:if(a=e.sent,console.log(a),201===a.data.code){e.next=8;break}return e.abrupt("return",t.$message.error(a.data.msg));case 8:if(t.user=a.data.data.user,"超级管理员"==t.user.role||"货物管理员"==t.user.role||"用户管理员"==t.user.role||"订单管理员"==t.user.role||"车辆管理员"==t.user.role||"工单管理员"==t.user.role||"权限管理员"==t.user.role){e.next=11;break}return e.abrupt("return",t.$message.error("权限不足"));case 11:window.sessionStorage.setItem("token",a.data.data.token),t.$router.push("/home"),t.$message.success(a.data.msg);case 14:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))}}},g={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login_container"},[r("div",{staticClass:"login_box"},[r("el-form",{ref:"loginFormRef",staticClass:"login_from",attrs:{model:e.loginForm,rules:e.loginFormRules,"label-width":"0px"}},[r("h1",{staticClass:"login_title"},[e._v("WMS")]),e._v(" "),r("el-form-item",{attrs:{prop:"mobile"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-user"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.verifyLoginInfo()}},model:{value:e.loginForm.mobile,callback:function(t){e.$set(e.loginForm,"mobile",t)},expression:"loginForm.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.verifyLoginInfo()}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),r("el-form-item",{staticClass:"buttons"},[r("el-button",{attrs:{type:"primary"},on:{click:e.verifyLoginInfo}},[e._v("Login")]),e._v(" "),r("el-button",{attrs:{type:"info"},on:{click:e.resetLoginFrom}},[e._v("Reset")])],1)],1)],1)])},staticRenderFns:[]};var f=r("VU/8")(m,g,!1,function(e){r("0Zec")},"data-v-1c41c976",null).exports,b={data:function(){return{menuList:[],iconList:["el-icon-user","el-icon-set-up","el-icon-goods","el-icon-s-order","el-icon-s-data"],isCollapse:!1}},created:function(){this.getMenuList()},methods:{userLogout:function(){window.sessionStorage.clear(),this.$router.push("/login")},getMenuList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/menus");case 2:if(r=t.sent,console.log(r),200===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:e.$message.success(r.data.msg),e.menuList=r.data.data;case 8:case"end":return t.stop()}},t,e)}))()},toggleCollapse:function(){this.isCollapse=!this.isCollapse}}},v={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"home-container"},[r("el-header",[r("span",[e._v("WMS")]),e._v(" "),r("el-button",{attrs:{type:"info"},on:{click:e.userLogout}},[e._v("退出")])],1),e._v(" "),r("el-container",[r("el-aside",{attrs:{width:e.isCollapse?"64px":"200px"}},[r("div",{staticClass:"toggle-button",on:{click:e.toggleCollapse}},[e._v("|||")]),e._v(" "),r("el-menu",{attrs:{"background-color":"#333744","text-color":"#ffffff","default-active":e.$route.path,"unique-opened":"",router:"",collapse:e.isCollapse,"collapse-transition":!1}},e._l(e.menuList,function(t,a){return r("el-submenu",{key:t.id,attrs:{index:t.id+""}},[r("template",{slot:"title"},[r("i",{class:e.iconList[a]}),e._v(" "),r("span",[e._v(e._s(t.name))])]),e._v(" "),e._l(t.children,function(t){return r("el-menu-item",{key:t.id,attrs:{index:"/"+t.path}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-menu"}),e._v(" "),r("span",[e._v(e._s(t.name))])])],2)})],2)}),1)],1),e._v(" "),r("el-main",[r("router-view")],1)],1)],1)},staticRenderFns:[]};var y=r("VU/8")(b,v,!1,function(e){r("AyxB")},"data-v-22dfc722",null).exports,_={data:function(){return{queryInfo:{query:"",pagesize:1e4,pagenum:1,category:"all"},orderList:[],undoneOrder:0,doneOrder:0,unstartedOrder:0,goodsList:[],undoneGoods:0,unstartedGoods:0,doneGoods:0,userList:[],undoneUser:0,unstartedUser:0,carList:[],undoneCar:0,unstartedCar:0,wipList:[],doneWip:0,undoneWip:0}},created:function(){this.init()},methods:{init:function(){this.getOrderList(),this.getGoodsList(),this.getUserList(),this.getCarList(),this.getWipList()},getOrderList:function(){var e=this;return p()(c.a.mark(function t(){var r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("orders",{params:e.queryInfo});case 2:if(200===(r=t.sent).data.code){t.next=5;break}return t.abrupt("return",e.$message.error(r.data.msg));case 5:for(console.log(r),e.$message.success(r.data.msg),e.orderList=r.data.data.orders,a=0;a<e.orderList.length;a++)0==e.orderList[a].courier_status&&e.unstartedOrder++,1==e.orderList[a].courier_status&&1==e.orderList[a].status&&e.doneOrder++;e.undoneOrder=e.orderList.length-(e.unstartedOrder+e.doneOrder);case 10:case"end":return t.stop()}},t,e)}))()},getGoodsList:function(){var e=this;return p()(c.a.mark(function t(){var r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/goods",{params:e.queryInfo});case 2:if(r=t.sent,console.log(r),200===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:for(e.$message.success(r.data.msg),e.goodsList=r.data.data.goods,a=0;a<e.goodsList.length;a++)0==e.goodsList[a].status&&1==e.goodsList[a].courier_status&&e.undoneGoods++,1==e.goodsList[a].status&&1==e.goodsList[a].courier_status&&e.doneGoods++;e.unstartedGoods=e.goodsList.length-e.undoneGoods-e.doneGoods;case 10:case"end":return t.stop()}},t,e)}))()},getUserList:function(){var e=this;return p()(c.a.mark(function t(){var r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/users",{params:e.queryInfo});case 2:if(r=t.sent,console.log(r),200===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:for(e.$message.success(r.data.msg),e.userList=r.data.data.users,a=0;a<e.userList.length;a++)1==e.userList[a].status&&e.undoneUser++;e.unstartedUser=e.userList.length-e.undoneUser;case 10:case"end":return t.stop()}},t,e)}))()},getCarList:function(){var e=this;return p()(c.a.mark(function t(){var r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/cars",{params:e.queryInfo});case 2:if(r=t.sent,console.log(r),200===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:for(e.$message.success(r.data.msg),e.carList=r.data.data.cars,a=0;a<e.carList.length;a++)1==e.carList[a].status&&e.undoneCar++;e.unstartedCar=e.carList.length-e.undoneCar;case 10:case"end":return t.stop()}},t,e)}))()},getWipList:function(){var e=this;return p()(c.a.mark(function t(){var r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/wips",{params:e.queryInfo});case 2:if(r=t.sent,console.log(r),200===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:for(e.$message.success(r.data.msg),e.wipList=r.data.data.wips,a=0;a<e.wipList.length;a++)1==e.wipList[a].status&&e.doneWip++;e.undoneWip=e.wipList.length-e.doneWip;case 10:case"end":return t.stop()}},t,e)}))()}}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",[r("el-card",[r("h1",{staticClass:"align_center"},[e._v("系统概况")])]),r("br"),r("br"),e._v(" "),r("el-col",{attrs:{span:2}},[e._v(" ")]),e._v(" "),r("el-col",{attrs:{span:9}},[r("el-card",[r("h3",[e._v("订单概况")]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前全部订单总数为："+e._s(e.orderList.length))]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前未开始的订单数为："+e._s(e.unstartedOrder))]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前未结束的订单数为："+e._s(e.undoneOrder))])]),r("br"),r("br"),e._v(" "),r("el-card",[r("h3",[e._v("用户概况")]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前全部用户总数为："+e._s(e.userList.length))]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前正在作业用户数为："+e._s(e.undoneUser))]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前未在作业用户数为："+e._s(e.unstartedUser))])]),r("br"),r("br"),e._v(" "),r("el-card",[r("h3",[e._v("货物概况")]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前全部货物总数为："+e._s(e.goodsList.length))]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前未开始运输的货物数为："+e._s(e.unstartedGoods))]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前未结束运输的货物数为："+e._s(e.undoneGoods))])])],1),e._v(" "),r("el-col",{attrs:{span:2}},[e._v(" ")]),e._v(" "),r("el-col",{attrs:{span:9}},[r("el-card",[r("h3",[e._v("车辆概况")]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前全部车辆总数为："+e._s(e.carList.length))]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前未开始作业的车辆数为："+e._s(e.unstartedCar))]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前未结束作业的车辆数为："+e._s(e.undoneCar))])]),r("br"),r("br"),e._v(" "),r("el-card",[r("h3",[e._v("工单概况")]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前全部工单总数为："+e._s(e.wipList.length))]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前未处理的工单数为："+e._s(e.doneWip))]),e._v(" "),r("p",{staticClass:"align_center"},[e._v("目前已处理的工单数为："+e._s(e.undoneWip))])]),r("br"),r("br")],1),e._v(" "),r("el-col",{attrs:{span:2}},[e._v(" ")])],1)],1)},staticRenderFns:[]};var k=r("VU/8")(_,h,!1,function(e){r("s7N8")},"data-v-7266bcf9",null).exports,x={data:function(){var e=function(e,t,r){if(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/.test(t))return r();r(new Error("请输入合法的邮箱"))},t=function(e,t,r){if(/^(0|86|17951)?(13[0-9]|14[57]|15[012356789]|17[678]|18[0-9])[0-9]{8}$/.test(t))return r();r(new Error("请输入合法的号码"))};return{queryInfo:{query:"",pagenum:1,pagesize:10,category:"all"},options:[{value:"all",label:"全部"},{value:"false",label:"空闲状态"},{value:"true",label:"正在作业"},{value:"city",label:"城市"}],addUserForm:{username:"",password:"",email:"",mobile:"",city:""},editUserForm:{username:"",email:"",mobile:"",city:""},addUserRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"用户名的长度在3到10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"密码的长度在6到16个字符之间",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入电话",trigger:"blur"},{validator:t,trigger:"blur"}],city:[{required:!0,message:"请输入地区",trigger:"blur"}]},editUserRules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入电话",trigger:"blur"},{validator:t,trigger:"blur"}],city:[{required:!0,message:"请输入地区",trigger:"blur"}]},userList:[],userInfo:{},roleList:[],userListSize:0,addDialogVisible:!1,editDialogVisible:!1,setRoleDialogVisible:!1,selectedRole:""}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.userList.splice(0,e.userList.length),t.next=3,e.$http.get("/users",{params:e.queryInfo});case 3:if(r=t.sent,console.log(r.data),200===r.data.code){t.next=7;break}return t.abrupt("return",e.$message.error(r.data.msg));case 7:e.$message.success(r.data.msg),e.userList=r.data.data.users,e.userListSize=r.data.data.total;case 10:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getUserList()},changeUserStatus:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$http.patch("/users/"+e.id+"/status",{status:e.status});case 2:if(a=r.sent,console.log(a),201===a.data.code){r.next=7;break}return e.status=!e.status,r.abrupt("return",t.$message.error(a.data.msg));case 7:t.$message.success(a.data.msg),t.getUserList();case 9:case"end":return r.stop()}},r,t)}))()},addUserCloseDialog:function(){this.$refs.addUserFormRef.resetFields()},editUserCloseDialog:function(){this.$refs.editUserFormRef.resetFields()},setRoleCloseDialog:function(){this.selectedRoleId="",this.userInfo={}},addUser:function(){var e,t=this;this.$refs.addUserFormRef.validate((e=p()(c.a.mark(function e(r){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.post("/register",t.addUserForm);case 4:if(a=e.sent,console.log(a),201===a.data.code){e.next=8;break}return e.abrupt("return",t.$message.error(a.data.msg));case 8:t.$message.success(a.data.msg),t.addDialogVisible=!1,t.getUserList();case 11:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},showEditDialog:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("/users/"+e);case 3:if(a=r.sent,console.log(a),200===a.data.code){r.next=7;break}return r.abrupt("return",t.$message.error(a.data.msg));case 7:t.$message.success(a.data.msg),t.editUserForm=a.data.data;case 9:case"end":return r.stop()}},r,t)}))()},editUser:function(){var e,t=this;this.$refs.editUserFormRef.validate((e=p()(c.a.mark(function e(r){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.put("/users/"+t.editUserForm.id,t.editUserForm);case 4:if(a=e.sent,console.log(a),201===a.data.code){e.next=8;break}return e.abrupt("return",t.$message.error(a.data.msg));case 8:t.$message.success(a.data.msg),t.editDialogVisible=!1,t.getUserList();case 11:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},deleteUser:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===r.sent){r.next=5;break}return r.abrupt("return",t.$message.info("取消删除用户"));case 5:return r.next=7,t.$http.delete("/users/"+e);case 7:if(204===(a=r.sent).data.code){r.next=10;break}return r.abrupt("return",t.$message.error(a.data.msg));case 10:t.$message.success(a.data.msg),t.getUserList();case 12:case"end":return r.stop()}},r,t)}))()},showSetRoleDialog:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.userInfo=e,t.setRoleDialogVisible=!0,r.next=4,t.$http.get("roles");case 4:if(a=r.sent,console.log(a),200===a.data.code){r.next=8;break}return r.abrupt("return",t.$message.error(a.data.msg));case 8:t.$message.success(a.data.msg),t.roleList=a.data.data;case 10:case"end":return r.stop()}},r,t)}))()},setRole:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.patch("users/"+e.userInfo.id+"/role",{role:e.selectedRole});case 2:if(r=t.sent,console.log(r),201===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:e.$message.success(r.data.msg),e.setRoleDialogVisible=!1,e.getUserList();case 9:case"end":return t.stop()}},t,e)}))()}}},w={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("用户管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("用户列表")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-input",{attrs:{placeholder:"请输入用户名或地区",clearable:""},on:{clear:e.getUserList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getUserList.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getUserList},model:{value:e.queryInfo.category,callback:function(t){e.$set(e.queryInfo,"category",t)},expression:"queryInfo.category"}},e._l(e.options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加用户")])],1)],1),e._v(" "),r("el-table",{attrs:{data:e.userList,stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"姓名",prop:"username"}}),e._v(" "),r("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),e._v(" "),r("el-table-column",{attrs:{label:"电话",prop:"mobile"}}),e._v(" "),r("el-table-column",{attrs:{label:"角色",prop:"role"}}),e._v(" "),r("el-table-column",{attrs:{label:"地区",prop:"city"}}),e._v(" "),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.changeUserStatus(t.row)}},model:{value:t.row.status,callback:function(r){e.$set(t.row,"status",r)},expression:"scope.row.status"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.id)}}}),e._v(" "),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteUser(t.row.id)}}}),e._v(" "),r("el-tooltip",{attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.showSetRoleDialog(t.row)}}})],1)]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,25,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.userListSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogVisible,width:"40%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addUserCloseDialog}},[r("el-form",{ref:"addUserFormRef",attrs:{model:e.addUserForm,rules:e.addUserRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser.apply(null,arguments)}},model:{value:e.addUserForm.username,callback:function(t){e.$set(e.addUserForm,"username",t)},expression:"addUserForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser.apply(null,arguments)}},model:{value:e.addUserForm.password,callback:function(t){e.$set(e.addUserForm,"password",t)},expression:"addUserForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser.apply(null,arguments)}},model:{value:e.addUserForm.email,callback:function(t){e.$set(e.addUserForm,"email",t)},expression:"addUserForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser.apply(null,arguments)}},model:{value:e.addUserForm.mobile,callback:function(t){e.$set(e.addUserForm,"mobile",t)},expression:"addUserForm.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地区",prop:"city"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser.apply(null,arguments)}},model:{value:e.addUserForm.city,callback:function(t){e.$set(e.addUserForm,"city",t)},expression:"addUserForm.city"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改用户",visible:e.editDialogVisible,width:"40%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editUserCloseDialog}},[r("el-form",{ref:"editUserFormRef",attrs:{model:e.editUserForm,rules:e.editUserRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editUserForm.username,callback:function(t){e.$set(e.editUserForm,"username",t)},expression:"editUserForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editUser.apply(null,arguments)}},model:{value:e.editUserForm.email,callback:function(t){e.$set(e.editUserForm,"email",t)},expression:"editUserForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editUser.apply(null,arguments)}},model:{value:e.editUserForm.mobile,callback:function(t){e.$set(e.editUserForm,"mobile",t)},expression:"editUserForm.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地区",prop:"city"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editUser.apply(null,arguments)}},model:{value:e.editUserForm.city,callback:function(t){e.$set(e.editUserForm,"city",t)},expression:"editUserForm.city"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.editUser}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"分配角色",visible:e.setRoleDialogVisible,width:"40%"},on:{"update:visible":function(t){e.setRoleDialogVisible=t},close:e.setRoleCloseDialog}},[r("el-form",[r("p",[e._v("当前的用户："+e._s(e.userInfo.username))]),e._v(" "),r("p",[e._v("当前的角色："+e._s(e.userInfo.role))]),e._v(" "),r("p",[e._v("请选择新角色：\n                "),r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedRole,callback:function(t){e.selectedRole=t},expression:"selectedRole"}},e._l(e.roleList,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})}),1)],1)]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.setRoleDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.setRole}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var L=r("VU/8")(x,w,!1,function(e){r("qaay")},"data-v-43cde4e0",null).exports,$={data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:10,status:"deleted"},userList:[],userInfo:{},userListSize:0}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/users",{params:e.queryInfo});case 2:if(r=t.sent,console.log(r.data),200===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:e.$message.success(r.data.msg),e.userList=r.data.data.users,e.userListSize=r.data.data.total;case 9:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getUserList()},recoverUser:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将恢复该用户信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===r.sent){r.next=5;break}return r.abrupt("return",t.$message.info("取消恢复用户信息"));case 5:return r.next=7,t.$http.patch("/users/"+e+"/recover");case 7:if(201===(a=r.sent).data.code){r.next=10;break}return r.abrupt("return",t.$message.error(a.data.msg));case 10:t.$message.success(a.data.msg),t.getUserList();case 12:case"end":return r.stop()}},r,t)}))()}}},C={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("用户管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("恢复用户")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getUserList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getUserList.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1)],1),e._v(" "),r("el-table",{attrs:{data:e.userList,stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"姓名",prop:"username"}}),e._v(" "),r("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),e._v(" "),r("el-table-column",{attrs:{label:"电话",prop:"mobile"}}),e._v(" "),r("el-table-column",{attrs:{label:"角色",prop:"role"}}),e._v(" "),r("el-table-column",{attrs:{label:"地区",prop:"city"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.recoverUser(t.row.id)}}})]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,25,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.userListSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var F=r("VU/8")($,C,!1,function(e){r("Djgc")},"data-v-0caa6f9e",null).exports,U={data:function(){return{userid:"",editUserForm:{username:"",email:"",mobile:"",city:""},editUserRules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:function(e,t,r){if(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/.test(t))return r();r(new Error("请输入合法的邮箱"))},trigger:"blur"}],mobile:[{required:!0,message:"请输入电话",trigger:"blur"},{validator:function(e,t,r){if(/^(0|86|17951)?(13[0-9]|14[57]|15[012356789]|17[678]|18[0-9])[0-9]{8}$/.test(t))return r();r(new Error("请输入合法的号码"))},trigger:"blur"}],city:[{required:!0,message:"请输入地区",trigger:"blur"}]},userList:[],userInfo:{},roleList:[],editDialogVisible:!1,setRoleDgialogVisible:!1,selectedRole:""}},methods:{getUserList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.userList.splice(0,e.userList.length),t.next=3,e.$http.get("/users/"+e.userid);case 3:if(r=t.sent,console.log(r.data),200===r.data.code){t.next=7;break}return t.abrupt("return",e.$message.error(r.data.msg));case 7:e.$message.success(r.data.msg),e.userList.push(r.data.data);case 9:case"end":return t.stop()}},t,e)}))()},changeUserStatus:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$http.patch("/users/"+e.id+"/status",{status:e.status});case 2:if(a=r.sent,console.log(a),201===a.data.code){r.next=7;break}return e.status=!e.status,r.abrupt("return",t.$message.error(a.data.msg));case 7:t.$message.success(a.data.msg),t.getUserList();case 9:case"end":return r.stop()}},r,t)}))()},editUserCloseDialog:function(){this.$refs.editUserFormRef.resetFields()},setRoleCloseDialog:function(){this.selectedRoleId="",this.userInfo={}},showEditDialog:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("/users/"+e);case 3:if(a=r.sent,console.log(a),200===a.data.code){r.next=7;break}return r.abrupt("return",t.$message.error(a.data.msg));case 7:t.$message.success(a.data.msg),t.editUserForm=a.data.data;case 9:case"end":return r.stop()}},r,t)}))()},editUser:function(){var e,t=this;this.$refs.editUserFormRef.validate((e=p()(c.a.mark(function e(r){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.put("/users/"+t.editUserForm.id,t.editUserForm);case 4:if(a=e.sent,console.log(a),201===a.data.code){e.next=8;break}return e.abrupt("return",t.$message.error(a.data.msg));case 8:t.$message.success(a.data.msg),t.editDialogVisible=!1,t.getUserList();case 11:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},deleteUser:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该用户信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===r.sent){r.next=5;break}return r.abrupt("return",t.$message.info("取消删除用户信息"));case 5:return r.next=7,t.$http.delete("/users/"+e);case 7:if(204===(a=r.sent).data.code){r.next=10;break}return r.abrupt("return",t.$message.error(a.data.msg));case 10:t.$message.success(a.data.msg),t.userList.splice(0,t.userList.length);case 12:case"end":return r.stop()}},r,t)}))()},showSetRoleDialog:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.userInfo=e,t.setRoleDgialogVisible=!0,r.next=4,t.$http.get("/roles");case 4:if(a=r.sent,console.log(a),200===a.data.code){r.next=8;break}return r.abrupt("return",t.$message.error(a.data.msg));case 8:t.$message.success(a.data.msg),t.roleList=a.data.data;case 10:case"end":return r.stop()}},r,t)}))()},setRole:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.patch("users/"+e.userInfo.id+"/role",{role:e.selectedRole});case 2:if(r=t.sent,console.log(r),201===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:e.$message.success(r.data.msg),e.setRoleDgialogVisible=!1,e.getUserList();case 9:case"end":return t.stop()}},t,e)}))()}}},q={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("用户管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("用户查询")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-input",{attrs:{placeholder:"请输入用户 ID",clearable:""},on:{clear:e.getUserList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getUserList.apply(null,arguments)}},model:{value:e.userid,callback:function(t){e.userid=t},expression:"userid"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1)],1),e._v(" "),r("el-table",{attrs:{data:e.userList,stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"姓名",prop:"username"}}),e._v(" "),r("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),e._v(" "),r("el-table-column",{attrs:{label:"电话",prop:"mobile"}}),e._v(" "),r("el-table-column",{attrs:{label:"角色",prop:"role"}}),e._v(" "),r("el-table-column",{attrs:{label:"地区",prop:"city"}}),e._v(" "),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.changeUserStatus(t.row)}},model:{value:t.row.status,callback:function(r){e.$set(t.row,"status",r)},expression:"scope.row.status"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.id)}}}),e._v(" "),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteUser(t.row.id)}}}),e._v(" "),r("el-tooltip",{attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.showSetRoleDialog(t.row)}}})],1)]}}])})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改用户",visible:e.editDialogVisible,width:"40%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editUserCloseDialog}},[r("el-form",{ref:"editUserFormRef",attrs:{model:e.editUserForm,rules:e.editUserRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editUserForm.username,callback:function(t){e.$set(e.editUserForm,"username",t)},expression:"editUserForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editUser.apply(null,arguments)}},model:{value:e.editUserForm.email,callback:function(t){e.$set(e.editUserForm,"email",t)},expression:"editUserForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editUser.apply(null,arguments)}},model:{value:e.editUserForm.mobile,callback:function(t){e.$set(e.editUserForm,"mobile",t)},expression:"editUserForm.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地区",prop:"city"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editUser.apply(null,arguments)}},model:{value:e.editUserForm.city,callback:function(t){e.$set(e.editUserForm,"city",t)},expression:"editUserForm.city"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.editUser}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"分配角色",visible:e.setRoleDgialogVisible,width:"40%"},on:{"update:visible":function(t){e.setRoleDgialogVisible=t},close:e.setRoleCloseDialog}},[r("el-form",[r("p",[e._v("当前的用户："+e._s(e.userInfo.username))]),e._v(" "),r("p",[e._v("当前的角色："+e._s(e.userInfo.role))]),e._v(" "),r("p",[e._v("请选择新角色：\n                "),r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedRole,callback:function(t){e.selectedRole=t},expression:"selectedRole"}},e._l(e.roleList,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})}),1)],1)]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.setRoleDgialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.setRole}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var D=r("VU/8")(U,q,!1,function(e){r("HNvb")},"data-v-999c7cc4",null).exports,G={data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:10,category:"all"},options:[{value:"all",label:"全部"},{value:"false",label:"空闲状态"},{value:"true",label:"正在作业"},{value:"city",label:"城市"},{value:"brand",label:"品牌"},{value:"asc",label:"载重量正序"},{value:"desc",label:"载重量倒序"},{value:"more",label:"载重量大于"},{value:"less",label:"载重量小于"}],addCarForm:{brand:"",license:"",deadweight:null,city:""},editCarForm:{brand:"",license:"",dead_weight:0,city:""},addCarRules:{brand:[{required:!0,message:"请输入车辆品牌",trigger:"blur"}],license:[{required:!0,message:"请输入车辆车牌",trigger:"blur"}],deadweight:[{required:!0,message:"请输入载重量",trigger:"blur"}],city:[{required:!0,message:"请输入地区",trigger:"blur"}]},editCarRules:{brand:[{required:!0,message:"请输入车辆品牌",trigger:"blur"}],license:[{required:!0,message:"请输入车辆车牌",trigger:"blur"}],dead_weight:[{required:!0,message:"请输入载重量",trigger:"blur"}],city:[{required:!0,message:"请输入地区",trigger:"blur"}]},carList:[],userList:[],carInfo:{},carListSize:0,addDialogVisible:!1,editDialogVisible:!1}},created:function(){this.getCarList()},methods:{getCarList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.carList.splice(0,e.carList.length),t.next=3,e.$http.get("/cars",{params:e.queryInfo});case 3:if(r=t.sent,console.log(r.data),200===r.data.code){t.next=7;break}return t.abrupt("return",e.$message.error(r.data.msg));case 7:e.$message.success(r.data.msg),e.carList=r.data.data.cars,e.carListSize=r.data.data.total;case 10:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getCarList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getCarList()},changeCarStatus:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$http.patch("/cars/"+e.id+"/status",{status:e.status});case 2:if(a=r.sent,console.log(a),201===a.data.code){r.next=7;break}return e.status=!e.status,r.abrupt("return",t.$message.error(a.data.msg));case 7:t.$message.success(a.data.msg),t.getCarList();case 9:case"end":return r.stop()}},r,t)}))()},addCarCloseDialog:function(){this.$refs.addCarFormRef.resetFields()},editCarCloseDialog:function(){this.$refs.editCarFormRef.resetFields()},addCar:function(){var e,t=this;this.$refs.addCarFormRef.validate((e=p()(c.a.mark(function e(r){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.post("/cars",t.addCarForm);case 4:if(a=e.sent,console.log(a),201===a.data.code){e.next=8;break}return e.abrupt("return",t.$message.error(a.data.msg));case 8:t.$message.success(a.data.msg),t.addDialogVisible=!1,t.getCarList();case 11:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},showEditDialog:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("/cars/"+e);case 3:if(a=r.sent,console.log(a),200===a.data.code){r.next=7;break}return r.abrupt("return",t.$message.error(a.data.msg));case 7:t.$message.success(a.data.msg),t.editCarForm=a.data.data;case 9:case"end":return r.stop()}},r,t)}))()},showAddDialog:function(){this.addDialogVisible=!0},editCar:function(){var e,t=this;this.$refs.editCarFormRef.validate((e=p()(c.a.mark(function e(r){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return t.editCarForm.deadweight=t.editCarForm.dead_weight,e.next=5,t.$http.put("/cars/"+t.editCarForm.id,t.editCarForm);case 5:if(a=e.sent,console.log(a),201===a.data.code){e.next=9;break}return e.abrupt("return",t.$message.error(a.data.msg));case 9:t.$message.success(a.data.msg),t.editDialogVisible=!1,t.getCarList();case 12:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},deleteCar:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该车辆信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===r.sent){r.next=5;break}return r.abrupt("return",t.$message.info("取消删除车辆信息"));case 5:return r.next=7,t.$http.delete("/cars/"+e);case 7:if(204===(a=r.sent).data.code){r.next=10;break}return r.abrupt("return",t.$message.error(a.data.msg));case 10:t.$message.success(a.data.msg),t.getCarList();case 12:case"end":return r.stop()}},r,t)}))()}}},I={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("车辆管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("车辆列表")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-input",{attrs:{placeholder:"请输入车辆牌照号码或所需条件",clearable:""},on:{clear:e.getCarList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getCarList.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getCarList},slot:"append"})],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getCarList},model:{value:e.queryInfo.category,callback:function(t){e.$set(e.queryInfo,"category",t)},expression:"queryInfo.category"}},e._l(e.options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.showAddDialog}},[e._v("添加车辆")])],1)],1),e._v(" "),r("el-table",{attrs:{data:e.carList,stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"品牌",prop:"brand"}}),e._v(" "),r("el-table-column",{attrs:{label:"车牌",prop:"license"}}),e._v(" "),r("el-table-column",{attrs:{label:"载重量",prop:"dead_weight"}}),e._v(" "),r("el-table-column",{attrs:{label:"地区",prop:"city"}}),e._v(" "),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.changeCarStatus(t.row)}},model:{value:t.row.status,callback:function(r){e.$set(t.row,"status",r)},expression:"scope.row.status"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.id)}}}),e._v(" "),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteCar(t.row.id)}}})]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,25,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.carListSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"添加车辆",visible:e.addDialogVisible,width:"40%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addCarCloseDialog}},[r("el-form",{ref:"addCarFormRef",attrs:{model:e.addCarForm,rules:e.addCarRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"品牌",prop:"brand"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addCar.apply(null,arguments)}},model:{value:e.addCarForm.brand,callback:function(t){e.$set(e.addCarForm,"brand",t)},expression:"addCarForm.brand"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"车牌",prop:"license"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addCar.apply(null,arguments)}},model:{value:e.addCarForm.license,callback:function(t){e.$set(e.addCarForm,"license",t)},expression:"addCarForm.license"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"载重量",prop:"deadweight"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addCar.apply(null,arguments)}},model:{value:e.addCarForm.deadweight,callback:function(t){e.$set(e.addCarForm,"deadweight",e._n(t))},expression:"addCarForm.deadweight"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地区",prop:"city"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addCar.apply(null,arguments)}},model:{value:e.addCarForm.city,callback:function(t){e.$set(e.addCarForm,"city",t)},expression:"addCarForm.city"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.addCar}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改车辆",visible:e.editDialogVisible,width:"40%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editCarCloseDialog}},[r("el-form",{ref:"editCarFormRef",attrs:{model:e.editCarForm,rules:e.editCarRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"品牌",prop:"brand"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editCar.apply(null,arguments)}},model:{value:e.editCarForm.brand,callback:function(t){e.$set(e.editCarForm,"brand",t)},expression:"editCarForm.brand"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"车牌",prop:"license"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editCar.apply(null,arguments)}},model:{value:e.editCarForm.license,callback:function(t){e.$set(e.editCarForm,"license",t)},expression:"editCarForm.license"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"载重量",prop:"dead_weight"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editCar.apply(null,arguments)}},model:{value:e.editCarForm.dead_weight,callback:function(t){e.$set(e.editCarForm,"dead_weight",e._n(t))},expression:"editCarForm.dead_weight"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地区",prop:"city"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editCar.apply(null,arguments)}},model:{value:e.editCarForm.city,callback:function(t){e.$set(e.editCarForm,"city",t)},expression:"editCarForm.city"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.editCar}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var O=r("VU/8")(G,I,!1,function(e){r("iGOg")},"data-v-9fdf3184",null).exports,z={data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:10,status:"deleted"},carList:[],carInfo:{},carListSize:0}},created:function(){this.getCarList()},methods:{getCarList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/cars",{params:e.queryInfo});case 2:if(r=t.sent,console.log(r.data),200===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:e.$message.success(r.data.msg),e.carList=r.data.data.cars,e.carListSize=r.data.data.total;case 9:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getCarList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getCarList()},recoverCar:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将恢复该车辆信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===r.sent){r.next=5;break}return r.abrupt("return",t.$message.info("取消恢复车辆信息"));case 5:return r.next=7,t.$http.patch("/cars/"+e+"/recover");case 7:if(201===(a=r.sent).data.code){r.next=10;break}return r.abrupt("return",t.$message.error(a.data.msg));case 10:t.$message.success(a.data.msg),t.getCarList();case 12:case"end":return r.stop()}},r,t)}))()}}},R={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("车辆管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("恢复车辆")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-input",{attrs:{placeholder:"请输入车辆牌照号码",clearable:""},on:{clear:e.getCarList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getCarList.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getCarList},slot:"append"})],1)],1)],1),e._v(" "),r("el-table",{attrs:{data:e.carList,stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"品牌",prop:"brand"}}),e._v(" "),r("el-table-column",{attrs:{label:"车牌",prop:"license"}}),e._v(" "),r("el-table-column",{attrs:{label:"载重量",prop:"dead_weight"}}),e._v(" "),r("el-table-column",{attrs:{label:"地区",prop:"city"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.recoverCar(t.row.id)}}})]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,25,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.carListSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var V=r("VU/8")(z,R,!1,function(e){r("UeMn")},"data-v-635b160d",null).exports,S={data:function(){return{carid:"",editCarForm:{brand:"",license:"",dead_weight:0,city:""},editCarRules:{brand:[{required:!0,message:"请输入车辆品牌",trigger:"blur"}],license:[{required:!0,message:"请输入车辆车牌",trigger:"blur"}],dead_weight:[{required:!0,message:"请输入载重量",trigger:"blur"}],city:[{required:!0,message:"请输入地区",trigger:"blur"}]},carList:[],carInfo:{},editDialogVisible:!1}},methods:{getCarList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.carList.splice(0,e.carList.length),t.next=3,e.$http.get("/cars/"+e.carid);case 3:if(r=t.sent,console.log(r.data),200===r.data.code){t.next=7;break}return t.abrupt("return",e.$message.error(r.data.msg));case 7:e.$message.success(r.data.msg),e.carList.push(r.data.data);case 9:case"end":return t.stop()}},t,e)}))()},changeCarStatus:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$http.patch("/cars/"+e.id+"/status",{status:e.status});case 2:if(a=r.sent,console.log(a),201===a.data.code){r.next=7;break}return e.status=!e.status,r.abrupt("return",t.$message.error(a.data.msg));case 7:t.$message.success(a.data.msg),t.getCarList();case 9:case"end":return r.stop()}},r,t)}))()},editCarCloseDialog:function(){this.$refs.editCarFormRef.resetFields()},showEditDialog:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("/cars/"+e);case 3:if(a=r.sent,console.log(a),200===a.data.code){r.next=7;break}return r.abrupt("return",t.$message.error(a.data.msg));case 7:t.$message.success(a.data.msg),t.editCarForm=a.data.data;case 9:case"end":return r.stop()}},r,t)}))()},editCar:function(){var e,t=this;this.$refs.editCarFormRef.validate((e=p()(c.a.mark(function e(r){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return t.editCarForm.deadweight=t.editCarForm.dead_weight,e.next=5,t.$http.put("/cars/"+t.editCarForm.id,t.editCarForm);case 5:if(a=e.sent,console.log(a),201===a.data.code){e.next=9;break}return e.abrupt("return",t.$message.error(a.data.msg));case 9:t.$message.success(a.data.msg),t.editDialogVisible=!1,t.getCarList();case 12:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},deleteCar:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该车辆信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===r.sent){r.next=5;break}return r.abrupt("return",t.$message.info("取消删除车辆信息"));case 5:return r.next=7,t.$http.delete("/cars/"+e);case 7:if(204===(a=r.sent).data.code){r.next=10;break}return r.abrupt("return",t.$message.error(a.data.msg));case 10:t.$message.success(a.data.msg),t.carList.splice(0,t.carList.length);case 12:case"end":return r.stop()}},r,t)}))()}}},E={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("车辆管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("车辆列表")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-input",{attrs:{placeholder:"请输入车辆 ID",clearable:""},on:{clear:e.getCarList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getCarList.apply(null,arguments)}},model:{value:e.carid,callback:function(t){e.carid=t},expression:"carid"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getCarList},slot:"append"})],1)],1)],1),e._v(" "),r("el-table",{attrs:{data:e.carList,stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"品牌",prop:"brand"}}),e._v(" "),r("el-table-column",{attrs:{label:"车牌",prop:"license"}}),e._v(" "),r("el-table-column",{attrs:{label:"载重量",prop:"dead_weight"}}),e._v(" "),r("el-table-column",{attrs:{label:"地区",prop:"city"}}),e._v(" "),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.changeCarStatus(t.row)}},model:{value:t.row.status,callback:function(r){e.$set(t.row,"status",r)},expression:"scope.row.status"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.id)}}}),e._v(" "),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteCar(t.row.id)}}})]}}])})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改车辆",visible:e.editDialogVisible,width:"40%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editCarCloseDialog}},[r("el-form",{ref:"editCarFormRef",attrs:{model:e.editCarForm,rules:e.editCarRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"品牌",prop:"brand"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editCar.apply(null,arguments)}},model:{value:e.editCarForm.brand,callback:function(t){e.$set(e.editCarForm,"brand",t)},expression:"editCarForm.brand"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"车牌",prop:"license"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editCar.apply(null,arguments)}},model:{value:e.editCarForm.license,callback:function(t){e.$set(e.editCarForm,"license",t)},expression:"editCarForm.license"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"载重量",prop:"dead_weight"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editCar.apply(null,arguments)}},model:{value:e.editCarForm.dead_weight,callback:function(t){e.$set(e.editCarForm,"dead_weight",e._n(t))},expression:"editCarForm.dead_weight"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地区",prop:"city"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editCar.apply(null,arguments)}},model:{value:e.editCarForm.city,callback:function(t){e.$set(e.editCarForm,"city",t)},expression:"editCarForm.city"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.editCar}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var B=r("VU/8")(S,E,!1,function(e){r("1p0o")},"data-v-6d3de948",null).exports,W={data:function(){return{roleList:[]}},created:function(){this.getRoleList()},methods:{getRoleList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/roles");case 2:if(r=t.sent,console.log(r),200===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:e.$message.success(r.data.msg),e.roleList=r.data.data;case 8:case"end":return t.stop()}},t,e)}))()}}},T={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("权限管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("角色列表")])],1),e._v(" "),r("el-table",{attrs:{data:e.roleList,stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"角色名称",prop:"name"}}),e._v(" "),r("el-table-column",{attrs:{label:"角色描述",prop:"desc"}})],1)],1)},staticRenderFns:[]};var A=r("VU/8")(W,T,!1,function(e){r("h+FY")},"data-v-321fd922",null).exports,j={data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:10,category:"all"},wipList:[],options:[{value:"all",label:"全部"},{value:"processed",label:"已处理"},{value:"untreated",label:"未处理"},{value:"asc",label:"时间正序"},{value:"desc",label:"时间倒序"}],wipListSize:0,wipDialogVisible:!1,reply:"",wipID:0}},created:function(){this.getWipList()},methods:{handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getWipList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getWipList()},getWipList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.wipList.splice(0,e.wipList.length),t.next=3,e.$http.get("/wips",{params:e.queryInfo});case 3:if(r=t.sent,console.log(r),200===r.data.code){t.next=7;break}return t.abrupt("return",e.$message.error(r.data.msg));case 7:e.$message.success(r.data.msg),e.wipList=r.data.data.wips,e.wipListSize=r.data.data.total;case 10:case"end":return t.stop()}},t,e)}))()},setWipCloseDialog:function(){this.reply="",this.wipID=0},replyWip:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.patch("/wips/"+e.wipID+"/reply",{reply:e.reply});case 2:if(r=t.sent,console.log(r),201===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:e.$message.success(r.data.msg),e.wipDialogVisible=!1,e.getWipList();case 9:case"end":return t.stop()}},t,e)}))()},showWipDialog:function(e){this.wipID=e,this.wipDialogVisible=!0}}},Z={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("权限管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("工单列表")])],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:7}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getWipList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getWipList.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getWipList},slot:"append"})],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getWipList},model:{value:e.queryInfo.category,callback:function(t){e.$set(e.queryInfo,"category",t)},expression:"queryInfo.category"}},e._l(e.options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),r("el-table",{attrs:{data:e.wipList,stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"工单标题",prop:"title"}}),e._v(" "),r("el-table-column",{attrs:{label:"工单描述",prop:"desc"}}),e._v(" "),r("el-table-column",{attrs:{label:"工单回复",prop:"reply"}}),e._v(" "),r("el-table-column",{attrs:{label:"工单时间",prop:"created_at"}}),e._v(" "),r("el-table-column",{attrs:{label:"工单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?r("el-tag",{attrs:{type:"success"}},[e._v("已处理")]):e._e(),e._v(" "),0==t.row.status?r("el-tag",{attrs:{type:"danger"}},[e._v("未处理")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showWipDialog(t.row.id)}}},[e._v("回复")])]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,25,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.wipListSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),r("el-dialog",{attrs:{title:"回复工单",visible:e.wipDialogVisible,width:"40%"},on:{"update:visible":function(t){e.wipDialogVisible=t},close:e.setWipCloseDialog}},[r("el-form",[r("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入内容",maxlength:"50",height:"50"},model:{value:e.reply,callback:function(t){e.reply=t},expression:"reply"}})],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.wipDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.replyWip}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var M=r("VU/8")(j,Z,!1,function(e){r("UkJ5")},"data-v-7feeea3c",null).exports,N={data:function(){var e=function(e,t,r){if(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/.test(t))return r();r(new Error("请输入合法的邮箱"))},t=function(e,t,r){if(/^(0|86|17951)?(13[0-9]|14[57]|15[012356789]|17[678]|18[0-9])[0-9]{8}$/.test(t))return r();r(new Error("请输入合法的号码"))};return{queryInfo:{query:"",pagenum:1,pagesize:10,category:"admin"},addUserForm:{username:"",password:"",email:"",mobile:"",city:""},editUserForm:{username:"",email:"",mobile:"",city:""},addUserRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"用户名的长度在3到10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"密码的长度在6到16个字符之间",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入电话",trigger:"blur"},{validator:t,trigger:"blur"}],city:[{required:!0,message:"请输入地区",trigger:"blur"}]},editUserRules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入电话",trigger:"blur"},{validator:t,trigger:"blur"}],city:[{required:!0,message:"请输入地区",trigger:"blur"}]},userList:[],userInfo:{},roleList:[],userListSize:0,addDialogVisible:!1,editDialogVisible:!1,setRoleDialogVisible:!1,selectedRole:""}},created:function(){this.getUserList()},methods:{getUserList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.userList.splice(0,e.userList.length),t.next=3,e.$http.get("/users",{params:e.queryInfo});case 3:if(r=t.sent,console.log(r.data),200===r.data.code){t.next=7;break}return t.abrupt("return",e.$message.error(r.data.msg));case 7:e.$message.success(r.data.msg),e.userList=r.data.data.users,e.userListSize=r.data.data.total;case 10:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getUserList()},changeUserStatus:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$http.patch("/users/"+e.id+"/status",{status:e.status});case 2:if(a=r.sent,console.log(a),201===a.data.code){r.next=7;break}return e.status=!e.status,r.abrupt("return",t.$message.error(a.data.msg));case 7:t.$message.success(a.data.msg),t.getUserList();case 9:case"end":return r.stop()}},r,t)}))()},addUserCloseDialog:function(){this.$refs.addUserFormRef.resetFields()},editUserCloseDialog:function(){this.$refs.editUserFormRef.resetFields()},setRoleCloseDialog:function(){this.selectedRoleId="",this.userInfo={}},addUser:function(){var e,t=this;this.$refs.addUserFormRef.validate((e=p()(c.a.mark(function e(r){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.post("/register",t.addUserForm);case 4:if(a=e.sent,console.log(a),201===a.data.code){e.next=8;break}return e.abrupt("return",t.$message.error(a.data.msg));case 8:t.$message.success(a.data.msg),t.addDialogVisible=!1,t.getUserList();case 11:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},showEditDialog:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.editDialogVisible=!0,r.next=3,t.$http.get("/users/"+e);case 3:if(a=r.sent,console.log(a),200===a.data.code){r.next=7;break}return r.abrupt("return",t.$message.error(a.data.msg));case 7:t.$message.success(a.data.msg),t.editUserForm=a.data.data;case 9:case"end":return r.stop()}},r,t)}))()},editUser:function(){var e,t=this;this.$refs.editUserFormRef.validate((e=p()(c.a.mark(function e(r){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.put("/users/"+t.editUserForm.id,t.editUserForm);case 4:if(a=e.sent,console.log(a),201===a.data.code){e.next=8;break}return e.abrupt("return",t.$message.error(a.data.msg));case 8:t.$message.success(a.data.msg),t.editDialogVisible=!1,t.getUserList();case 11:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},deleteUser:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===r.sent){r.next=5;break}return r.abrupt("return",t.$message.info("取消删除用户"));case 5:return r.next=7,t.$http.delete("/users/"+e);case 7:if(204===(a=r.sent).data.code){r.next=10;break}return r.abrupt("return",t.$message.error(a.data.msg));case 10:t.$message.success(a.data.msg),t.getUserList();case 12:case"end":return r.stop()}},r,t)}))()},showSetRoleDialog:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.userInfo=e,t.setRoleDialogVisible=!0,r.next=4,t.$http.get("roles");case 4:if(a=r.sent,console.log(a),200===a.data.code){r.next=8;break}return r.abrupt("return",t.$message.error(a.data.msg));case 8:t.$message.success(a.data.msg),t.roleList=a.data.data;case 10:case"end":return r.stop()}},r,t)}))()},setRole:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.patch("users/"+e.userInfo.id+"/role",{role:e.selectedRole});case 2:if(r=t.sent,console.log(r),201===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:e.$message.success(r.data.msg),e.setRoleDialogVisible=!1,e.getUserList();case 9:case"end":return t.stop()}},t,e)}))()}}},H={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("系统管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("管理员列表")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-input",{attrs:{placeholder:"请输入用户名或地区",clearable:""},on:{clear:e.getUserList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getUserList.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加用户")])],1)],1),e._v(" "),r("el-table",{attrs:{data:e.userList,stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"姓名",prop:"username"}}),e._v(" "),r("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),e._v(" "),r("el-table-column",{attrs:{label:"电话",prop:"mobile"}}),e._v(" "),r("el-table-column",{attrs:{label:"角色",prop:"role"}}),e._v(" "),r("el-table-column",{attrs:{label:"地区",prop:"city"}}),e._v(" "),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.changeUserStatus(t.row)}},model:{value:t.row.status,callback:function(r){e.$set(t.row,"status",r)},expression:"scope.row.status"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditDialog(t.row.id)}}}),e._v(" "),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteUser(t.row.id)}}}),e._v(" "),r("el-tooltip",{attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.showSetRoleDialog(t.row)}}})],1)]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,25,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.userListSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogVisible,width:"40%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addUserCloseDialog}},[r("el-form",{ref:"addUserFormRef",attrs:{model:e.addUserForm,rules:e.addUserRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser.apply(null,arguments)}},model:{value:e.addUserForm.username,callback:function(t){e.$set(e.addUserForm,"username",t)},expression:"addUserForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser.apply(null,arguments)}},model:{value:e.addUserForm.password,callback:function(t){e.$set(e.addUserForm,"password",t)},expression:"addUserForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser.apply(null,arguments)}},model:{value:e.addUserForm.email,callback:function(t){e.$set(e.addUserForm,"email",t)},expression:"addUserForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser.apply(null,arguments)}},model:{value:e.addUserForm.mobile,callback:function(t){e.$set(e.addUserForm,"mobile",t)},expression:"addUserForm.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地区",prop:"city"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addUser.apply(null,arguments)}},model:{value:e.addUserForm.city,callback:function(t){e.$set(e.addUserForm,"city",t)},expression:"addUserForm.city"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改用户",visible:e.editDialogVisible,width:"40%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editUserCloseDialog}},[r("el-form",{ref:"editUserFormRef",attrs:{model:e.editUserForm,rules:e.editUserRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editUserForm.username,callback:function(t){e.$set(e.editUserForm,"username",t)},expression:"editUserForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editUser.apply(null,arguments)}},model:{value:e.editUserForm.email,callback:function(t){e.$set(e.editUserForm,"email",t)},expression:"editUserForm.email"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editUser.apply(null,arguments)}},model:{value:e.editUserForm.mobile,callback:function(t){e.$set(e.editUserForm,"mobile",t)},expression:"editUserForm.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地区",prop:"city"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editUser.apply(null,arguments)}},model:{value:e.editUserForm.city,callback:function(t){e.$set(e.editUserForm,"city",t)},expression:"editUserForm.city"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.editUser}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"分配角色",visible:e.setRoleDialogVisible,width:"40%"},on:{"update:visible":function(t){e.setRoleDialogVisible=t},close:e.setRoleCloseDialog}},[r("el-form",[r("p",[e._v("当前的用户："+e._s(e.userInfo.username))]),e._v(" "),r("p",[e._v("当前的角色："+e._s(e.userInfo.role))]),e._v(" "),r("p",[e._v("请选择新角色：\n                "),r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedRole,callback:function(t){e.selectedRole=t},expression:"selectedRole"}},e._l(e.roleList,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})}),1)],1)]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.setRoleDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.setRole}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var J=r("VU/8")(N,H,!1,function(e){r("7Dkb")},"data-v-0781d6db",null).exports,Y={data:function(){return{goodID:null,editGoodsForm:{},editGoodsRules:{name:[{required:!0,message:"请填写商品名称",trigger:"blur"}],price:[{type:"number",required:!0,message:"请填写商品价格",trigger:"blur"}],weight:[{type:"number",required:!0,message:"请填写商品重量",trigger:"blur"}],from_city:[{required:!0,message:"请填写商品出发城市",trigger:"blur"}],to_city:[{required:!0,message:"请填写商品到达城市",trigger:"blur"}]},goodsList:[],editGoodsDialogVisible:!1}},methods:{getGoodsList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.goodsList.splice(0,e.goodsList.length),t.next=3,e.$http.get("/goods/"+e.goodID);case 3:if(r=t.sent,console.log(r),200===r.data.code){t.next=7;break}return t.abrupt("return",e.$message.error(r.data.msg));case 7:e.$message.success(r.data.msg),e.goodsList.push(r.data.data);case 9:case"end":return t.stop()}},t,e)}))()},deleteGoods:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该商品信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===r.sent){r.next=5;break}return r.abrupt("return",t.$message.info("取消删除商品信息"));case 5:return r.next=7,t.$http.delete("goods/"+e);case 7:if(a=r.sent,console.log(a),204===a.data.code){r.next=11;break}return r.abrupt("return",t.$message.error(a.data.msg));case 11:t.$message.success(a.data.msg),t.getGoodsList();case 13:case"end":return r.stop()}},r,t)}))()},changeGoodsStatus:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$http.patch("/goods/"+e.id+"/courierstatus",{courierstatus:e.courier_status});case 2:if(a=r.sent,console.log(a),201===a.data.code){r.next=7;break}return e.courier_status=!e.courier_status,r.abrupt("return",t.$message.error(a.data.msg));case 7:t.$message.success(a.data.msg),t.getGoodsList();case 9:case"end":return r.stop()}},r,t)}))()},showEditGoodsDialog:function(e){this.editGoodsDialogVisible=!0,this.editGoodsForm=e},editGoodsCloseDialog:function(){this.$refs.editGoodsFormRef.resetFields(),this.editGoodsForm.goods_id=0},editGoods:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.editGoodsForm.fromcity=e.editGoodsForm.from_city,e.editGoodsForm.tocity=e.editGoodsForm.to_city,t.next=4,e.$http.put("/goods/"+e.editGoodsForm.id,e.editGoodsForm);case 4:if(r=t.sent,console.log(r),201===r.data.code){t.next=8;break}return t.abrupt("return",e.$message.error(r.data.msg));case 8:e.$message.success(r.data.msg),e.getGoodsList(),e.editGoodsDialogVisible=!1;case 11:case"end":return t.stop()}},t,e)}))()}}},P={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("商品管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("查询商品")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入货物 ID",clearable:""},on:{clear:e.getGoodsList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getGoodsList.apply(null,arguments)}},model:{value:e.goodID,callback:function(t){e.goodID=t},expression:"goodID"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getGoodsList},slot:"append"})],1)],1)],1),e._v(" "),r("el-table",{attrs:{data:e.goodsList,stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"商品名称",prop:"name"}}),e._v(" "),r("el-table-column",{attrs:{label:"价格（元）",prop:"price"}}),e._v(" "),r("el-table-column",{attrs:{label:"重量",prop:"weight"}}),e._v(" "),r("el-table-column",{attrs:{label:"出发城市",prop:"from_city"}}),e._v(" "),r("el-table-column",{attrs:{label:"到达城市",prop:"to_city"}}),e._v(" "),r("el-table-column",{attrs:{label:"运输单号",prop:"courier_number",width:"200px"}}),e._v(" "),r("el-table-column",{attrs:{label:"运输状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.changeGoodsStatus(t.row)}},model:{value:t.row.courier_status,callback:function(r){e.$set(t.row,"courier_status",r)},expression:"scope.row.courier_status"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"是否到达"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?r("el-tag",[e._v("已到达")]):r("el-tag",{attrs:{type:"danger"}},[e._v("未到达")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(r){return e.showEditGoodsDialog(t.row)}}}),e._v(" "),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(r){return e.deleteGoods(t.row.id)}}})]}}])})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改商品",visible:e.editGoodsDialogVisible,width:"40%"},on:{"update:visible":function(t){e.editGoodsDialogVisible=t},close:e.editGoodsCloseDialog}},[r("el-form",{ref:"editGoodsFormRef",attrs:{model:e.editGoodsForm,rules:e.editGoodsRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editGoods.apply(null,arguments)}},model:{value:e.editGoodsForm.name,callback:function(t){e.$set(e.editGoodsForm,"name",t)},expression:"editGoodsForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"商品价格",prop:"price"}},[r("el-input",{attrs:{type:"number"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editGoods.apply(null,arguments)}},model:{value:e.editGoodsForm.price,callback:function(t){e.$set(e.editGoodsForm,"price",e._n(t))},expression:"editGoodsForm.price"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"商品重量",prop:"weight"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editGoods.apply(null,arguments)}},model:{value:e.editGoodsForm.weight,callback:function(t){e.$set(e.editGoodsForm,"weight",e._n(t))},expression:"editGoodsForm.weight"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"出发城市",prop:"from_city"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editGoods.apply(null,arguments)}},model:{value:e.editGoodsForm.from_city,callback:function(t){e.$set(e.editGoodsForm,"from_city",t)},expression:"editGoodsForm.from_city"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"到达城市",prop:"to_city"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editGoods.apply(null,arguments)}},model:{value:e.editGoodsForm.to_city,callback:function(t){e.$set(e.editGoodsForm,"to_city",t)},expression:"editGoodsForm.to_city"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editGoodsDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.editGoods}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Q=r("VU/8")(Y,P,!1,function(e){r("pZpN")},"data-v-9158d8de",null).exports,X={data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:10,status:"deleted"},goodsList:[],goodsListSize:0}},created:function(){this.getGoodsList()},methods:{handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getGoodsList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getGoodsList()},getGoodsList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/goods",{params:e.queryInfo});case 2:if(r=t.sent,console.log(r),200===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:e.$message.success(r.data.msg),e.goodsList=r.data.data.goods,e.goodsListSize=r.data.data.total;case 9:case"end":return t.stop()}},t,e)}))()},recoverGoods:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久恢复该商品信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===r.sent){r.next=5;break}return r.abrupt("return",t.$message.info("取消恢复商品信息"));case 5:return r.next=7,t.$http.patch("/goods/"+e+"/recover");case 7:if(a=r.sent,console.log(a),201===a.data.code){r.next=11;break}return r.abrupt("return",t.$message.error(a.data.msg));case 11:t.$message.success(a.data.msg),t.getGoodsList();case 13:case"end":return r.stop()}},r,t)}))()}}},K={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("商品管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("恢复商品")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入货物名称",clearable:""},on:{clear:e.getGoodsList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getGoodsList.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getGoodsList},slot:"append"})],1)],1)],1),e._v(" "),r("el-table",{attrs:{data:e.goodsList,stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"商品名称",prop:"name"}}),e._v(" "),r("el-table-column",{attrs:{label:"价格（元）",prop:"price"}}),e._v(" "),r("el-table-column",{attrs:{label:"重量",prop:"weight"}}),e._v(" "),r("el-table-column",{attrs:{label:"出发城市",prop:"from_city"}}),e._v(" "),r("el-table-column",{attrs:{label:"到达城市",prop:"to_city"}}),e._v(" "),r("el-table-column",{attrs:{label:"运输单号",prop:"courier_number",width:"200px"}}),e._v(" "),r("el-table-column",{attrs:{label:"是否到达"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?r("el-tag",[e._v("已到达")]):r("el-tag",{attrs:{type:"danger"}},[e._v("未到达")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(r){return e.recoverGoods(t.row.id)}}})]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,25,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.goodsListSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var ee=r("VU/8")(X,K,!1,function(e){r("38Rh")},"data-v-5d2e90b8",null).exports,te={data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:10,category:"all"},options:[{value:"all",label:"全部"},{value:"price_asc",label:"价格正序"},{value:"price_desc",label:"价格倒序"},{value:"price_more",label:"价格大于"},{value:"price_less",label:"价格小于"},{value:"weight_asc",label:"重量正序"},{value:"weight_desc",label:"重量倒序"},{value:"weight_more",label:"重量大于"},{value:"weight_less",label:"重量小于"},{value:"from_city",label:"出发城市"},{value:"to_city",label:"目标城市"},{value:"courier_true",label:"正在运输"},{value:"courier_false",label:"暂未运输"},{value:"goods_true",label:"已经到达"},{value:"goods_false",label:"还未到达"}],editGoodsForm:{},addGoodsForm:{name:"",price:null,weight:null,fromcity:"",tocity:""},addGoodsRules:{name:[{required:!0,message:"请填写商品名称",trigger:"blur"}],price:[{type:"number",required:!0,message:"请填写商品价格",trigger:"blur"}],weight:[{type:"number",required:!0,message:"请填写商品重量",trigger:"blur"}],fromcity:[{required:!0,message:"请填写商品出发城市",trigger:"blur"}],tocity:[{required:!0,message:"请填写商品到达城市",trigger:"blur"}]},editGoodsRules:{name:[{required:!0,message:"请填写商品名称",trigger:"blur"}],price:[{type:"number",required:!0,message:"请填写商品价格",trigger:"blur"}],weight:[{type:"number",required:!0,message:"请填写商品重量",trigger:"blur"}],from_city:[{required:!0,message:"请填写商品出发城市",trigger:"blur"}],to_city:[{required:!0,message:"请填写商品到达城市",trigger:"blur"}]},goodsList:[],goodsListSize:0,editGoodsDialogVisible:!1,addGoodsDialogVisible:!1}},created:function(){this.getGoodsList()},methods:{handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getGoodsList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getGoodsList()},getGoodsList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.goodsList.splice(0,e.goodsList.length),t.next=3,e.$http.get("/goods",{params:e.queryInfo});case 3:if(r=t.sent,console.log(r),200===r.data.code){t.next=7;break}return t.abrupt("return",e.$message.error(r.data.msg));case 7:e.$message.success(r.data.msg),e.goodsList=r.data.data.goods,e.goodsListSize=r.data.data.total;case 10:case"end":return t.stop()}},t,e)}))()},deleteGoods:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该商品信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===r.sent){r.next=5;break}return r.abrupt("return",t.$message.info("取消删除商品信息"));case 5:return r.next=7,t.$http.delete("goods/"+e);case 7:if(a=r.sent,console.log(a),204===a.data.code){r.next=11;break}return r.abrupt("return",t.$message.error(a.data.msg));case 11:t.$message.success(a.data.msg),t.getGoodsList();case 13:case"end":return r.stop()}},r,t)}))()},changeGoodsStatus:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$http.patch("/goods/"+e.id+"/courierstatus",{courierstatus:e.courier_status});case 2:if(a=r.sent,console.log(a),201===a.data.code){r.next=7;break}return e.courier_status=!e.courier_status,r.abrupt("return",t.$message.error(a.data.msg));case 7:t.$message.success(a.data.msg),t.getGoodsList();case 9:case"end":return r.stop()}},r,t)}))()},showEditGoodsDialog:function(e){this.editGoodsDialogVisible=!0,this.editGoodsForm=e},showAddGoodsDialog:function(){this.addGoodsDialogVisible=!0},editGoodsCloseDialog:function(){this.$refs.editGoodsFormRef.resetFields(),this.editGoodsForm.goods_id=0},addGoodsCloseDialog:function(){this.$refs.addGoodsFormRef.resetFields()},editGoods:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.editGoodsForm.fromcity=e.editGoodsForm.from_city,e.editGoodsForm.tocity=e.editGoodsForm.to_city,t.next=4,e.$http.put("/goods/"+e.editGoodsForm.id,e.editGoodsForm);case 4:if(r=t.sent,console.log(r),201===r.data.code){t.next=8;break}return t.abrupt("return",e.$message.error(r.data.msg));case 8:e.$message.success(r.data.msg),e.getGoodsList(),e.editGoodsDialogVisible=!1;case 11:case"end":return t.stop()}},t,e)}))()},addGoods:function(){var e=this;return p()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.addGoodsFormRef.validate(function(){var t=p()(c.a.mark(function t(r){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("/goods",e.addGoodsForm);case 4:if(a=t.sent,console.log(a),201===a.data.code){t.next=8;break}return t.abrupt("return",e.$message.error(a.data.msg));case 8:e.$message.success(a.data.msg),e.getGoodsList(),e.addGoodsDialogVisible=!1;case 11:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t,e)}))()}}},re={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("商品管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("商品查询")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入货物名称",clearable:""},on:{clear:e.getGoodsList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getGoodsList.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getGoodsList},slot:"append"})],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getGoodsList},model:{value:e.queryInfo.category,callback:function(t){e.$set(e.queryInfo,"category",t)},expression:"queryInfo.category"}},e._l(e.options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.showAddGoodsDialog}},[e._v("添加商品")])],1)],1),e._v(" "),r("el-table",{attrs:{data:e.goodsList,stripe:""}},[r("el-table-column",{attrs:{label:"#",type:"index"}}),e._v(" "),r("el-table-column",{attrs:{label:"商品名称",prop:"name"}}),e._v(" "),r("el-table-column",{attrs:{label:"价格（元）",prop:"price"}}),e._v(" "),r("el-table-column",{attrs:{label:"重量",prop:"weight"}}),e._v(" "),r("el-table-column",{attrs:{label:"出发城市",prop:"from_city"}}),e._v(" "),r("el-table-column",{attrs:{label:"到达城市",prop:"to_city"}}),e._v(" "),r("el-table-column",{attrs:{label:"运输单号",prop:"courier_number",width:"200px"}}),e._v(" "),r("el-table-column",{attrs:{label:"运输状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.changeGoodsStatus(t.row)}},model:{value:t.row.courier_status,callback:function(r){e.$set(t.row,"courier_status",r)},expression:"scope.row.courier_status"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"是否到达"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status?r("el-tag",[e._v("已到达")]):r("el-tag",{attrs:{type:"danger"}},[e._v("未到达")])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(r){return e.showEditGoodsDialog(t.row)}}}),e._v(" "),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(r){return e.deleteGoods(t.row.id)}}})]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,25,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.goodsListSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"添加商品",visible:e.addGoodsDialogVisible,width:"40%"},on:{"update:visible":function(t){e.addGoodsDialogVisible=t},close:e.addGoodsCloseDialog}},[r("el-form",{ref:"addGoodsFormRef",attrs:{model:e.addGoodsForm,rules:e.addGoodsRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"货物名称",prop:"name"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addGoods.apply(null,arguments)}},model:{value:e.addGoodsForm.name,callback:function(t){e.$set(e.addGoodsForm,"name",t)},expression:"addGoodsForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"货物价格",prop:"price"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addGoods.apply(null,arguments)}},model:{value:e.addGoodsForm.price,callback:function(t){e.$set(e.addGoodsForm,"price",e._n(t))},expression:"addGoodsForm.price"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"货物重量",prop:"weight"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addGoods.apply(null,arguments)}},model:{value:e.addGoodsForm.weight,callback:function(t){e.$set(e.addGoodsForm,"weight",e._n(t))},expression:"addGoodsForm.weight"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"出发城市",prop:"fromcity"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addGoods.apply(null,arguments)}},model:{value:e.addGoodsForm.fromcity,callback:function(t){e.$set(e.addGoodsForm,"fromcity",t)},expression:"addGoodsForm.fromcity"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"到达城市",prop:"tocity"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addGoods.apply(null,arguments)}},model:{value:e.addGoodsForm.tocity,callback:function(t){e.$set(e.addGoodsForm,"tocity",t)},expression:"addGoodsForm.tocity"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addGoodsDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.addGoods}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改商品",visible:e.editGoodsDialogVisible,width:"40%"},on:{"update:visible":function(t){e.editGoodsDialogVisible=t},close:e.editGoodsCloseDialog}},[r("el-form",{ref:"editGoodsFormRef",attrs:{model:e.editGoodsForm,rules:e.editGoodsRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editGoods.apply(null,arguments)}},model:{value:e.editGoodsForm.name,callback:function(t){e.$set(e.editGoodsForm,"name",t)},expression:"editGoodsForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"商品价格",prop:"price"}},[r("el-input",{attrs:{type:"number"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editGoods.apply(null,arguments)}},model:{value:e.editGoodsForm.price,callback:function(t){e.$set(e.editGoodsForm,"price",e._n(t))},expression:"editGoodsForm.price"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"商品重量",prop:"weight"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editGoods.apply(null,arguments)}},model:{value:e.editGoodsForm.weight,callback:function(t){e.$set(e.editGoodsForm,"weight",e._n(t))},expression:"editGoodsForm.weight"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"出发城市",prop:"from_city"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editGoods.apply(null,arguments)}},model:{value:e.editGoodsForm.from_city,callback:function(t){e.$set(e.editGoodsForm,"from_city",t)},expression:"editGoodsForm.from_city"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"到达城市",prop:"to_city"}},[r("el-input",{nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editGoods.apply(null,arguments)}},model:{value:e.editGoodsForm.to_city,callback:function(t){e.$set(e.editGoodsForm,"to_city",t)},expression:"editGoodsForm.to_city"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editGoodsDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.editGoods}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var ae=r("VU/8")(te,re,!1,function(e){r("Vpw8")},"data-v-37446358",null).exports,se=(r("M4fF"),{data:function(){return{goodsQueryInfo:{query:"",pagenum:1,pagesize:1e4,category:"courier_false"},queryInfo:{query:"",pagenum:1,pagesize:1e4,category:"city"},weight:"",activeStep:0,selectedUser:null,selectedCar:null,selectedGoods:null,userList:[],carList:[],goodsList:[],headerObject:{Authorization:window.sessionStorage.getItem("token")}}},created:function(){this.getGoodsList()},methods:{addOrder:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("orders",{carrieruserid:e.selectedUser,carriercarid:e.selectedCar,goodsid:e.selectedGoods});case 2:if(r=t.sent,console.log(r),201===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:e.$message.success(r.data.msg),e.$router.push("/orders");case 8:case"end":return t.stop()}},t,e)}))()},getUserList:function(){var e=this;return p()(c.a.mark(function t(){var r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.userList.splice(0,e.userList.length),t.next=3,e.$http.get("users",{params:e.queryInfo});case 3:if(r=t.sent,console.log(r),200===r.data.code){t.next=7;break}return t.abrupt("return",e.$message.error(r.data.msg));case 7:for(e.$message.success(r.data.msg),e.userList=r.data.data.users,a=0;a<e.userList.length;a++)e.userList[a].status&&(e.userList.splice(a,1),a--);case 10:case"end":return t.stop()}},t,e)}))()},getCarList:function(){var e=this;return p()(c.a.mark(function t(){var r,a,s;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.carList.splice(0,e.carList.length),r=0,r=0;case 3:if(!(r<e.goodsList.length)){t.next=11;break}if(e.goodsList[r].id!=e.selectedGoods){t.next=8;break}return e.queryInfo.query=e.goodsList[r].from_city,console.log(e.queryInfo.query),t.abrupt("break",11);case 8:r++,t.next=3;break;case 11:return t.next=13,e.$http.get("cars",{params:e.queryInfo});case 13:if(a=t.sent,console.log(a),200===a.data.code){t.next=17;break}return t.abrupt("return",e.$message.error(a.data.msg));case 17:for(e.$message.success(a.data.msg),e.carList=a.data.data.cars,s=0;s<e.carList.length;s++)console.log(e.carList[s].status),(e.carList[s].dead_weight<e.goodsList[r].weight||e.carList[s].status)&&(e.carList.splice(s,1),s--);e.getUserList();case 21:case"end":return t.stop()}},t,e)}))()},getGoodsList:function(){var e=this;return p()(c.a.mark(function t(){var r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("goods",{params:e.goodsQueryInfo});case 2:if(r=t.sent,console.log(r),200===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:for(e.$message.success(r.data.msg),e.goodsList=r.data.data.goods,a=0;a<e.goodsList.length;a++)console.log(e.goodsList[a].courier_number),e.goodsList[a].courier_number.length>0&&(e.goodsList.splice(a,1),a--);case 9:case"end":return t.stop()}},t,e)}))()}}}),ne={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("订单管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("添加订单")])],1),e._v(" "),r("el-card",[r("el-alert",{attrs:{title:"添加订单信息",type:"info",center:"","show-icon":"",closable:!1}}),e._v(" "),r("el-steps",{attrs:{space:300,active:e.activeStep-0,"finish-status":"success","align-center":""}},[r("el-step",{attrs:{title:"基本信息"}}),e._v(" "),r("el-step",{attrs:{title:"完成"}})],1),e._v(" "),r("el-form",{attrs:{"label-width":"100px","lable-position":"top"}},[r("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.activeStep,callback:function(t){e.activeStep=t},expression:"activeStep"}},[r("el-tab-pane",{attrs:{label:"基本信息",name:"0"}},[r("el-form-item",{attrs:{label:"请选择承运货物","label-width":"200px"}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getCarList()}},model:{value:e.selectedGoods,callback:function(t){e.selectedGoods=t},expression:"selectedGoods"}},e._l(e.goodsList,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"请选择承运车辆","label-width":"200px"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedCar,callback:function(t){e.selectedCar=t},expression:"selectedCar"}},e._l(e.carList,function(e,t){return r("el-option",{key:t,attrs:{label:e.license,value:e.id}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"请选择承运用户","label-width":"200px"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}},e._l(e.userList,function(e,t){return r("el-option",{key:t,attrs:{label:e.username,value:e.id}})}),1)],1),e._v(" "),r("el-button",{staticClass:"submitButton",attrs:{type:"primary"},on:{click:e.addOrder}},[e._v("添加订单")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var oe=r("VU/8")(se,ne,!1,function(e){r("CEo3")},"data-v-6396361e",null).exports,ie={data:function(){return{queryInfo:{query:"",pagesize:10,pagenum:1,category:"all"},options:[{value:"all",label:"全部"},{value:"username",label:"承运用户"},{value:"license",label:"承运车辆"},{value:"goodsname",label:"承运货物"},{value:"from_city",label:"出发城市"},{value:"to_city",label:"目标城市"},{value:"courier_true",label:"正在运输"},{value:"courier_false",label:"暂未运输"},{value:"goods_true",label:"已经到达"},{value:"goods_false",label:"还未到达"}],orderList:[],orderListSize:0,currentOrder:{},viewLogisticsDialogVisible:!1,LogisticsInfo:[]}},created:function(){this.getOrderList()},methods:{handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getOrderList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getOrderList()},getOrderList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.orderList.splice(0,e.orderList.length),t.next=3,e.$http.get("orders",{params:e.queryInfo});case 3:if(r=t.sent,console.log(r),200===r.data.code){t.next=7;break}return t.abrupt("return",e.$message.error(r.data.msg));case 7:e.$message.success(r.data.msg),e.orderList=r.data.data.orders,e.orderListSize=r.data.data.total;case 10:case"end":return t.stop()}},t,e)}))()},viewLogisticsCloseDialog:function(){this.viewLogisticsDialogVisible=!1},showViewLogisticsDialog:function(e){var t=this;return p()(c.a.mark(function e(){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.viewLogisticsDialogVisible=!0,e.next=3,t.$http.get("/kuaidi/1106975712662");case 3:if(r=e.sent,console.log(r),200===r.data.meta.status){e.next=7;break}return e.abrupt("return",t.$message.error(r.data.msg));case 7:t.$message.success(r.data.msg),t.LogisticsInfo=r.data.data;case 9:case"end":return e.stop()}},e,t)}))()},deleteOrder:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将永久删除该订单信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===r.sent){r.next=5;break}return r.abrupt("return",t.$message.info("取消删除车辆信息"));case 5:return r.next=7,t.$http.delete("/orders/"+e);case 7:if(204===(a=r.sent).data.code){r.next=10;break}return r.abrupt("return",t.$message.error(a.data.msg));case 10:t.$message.success(a.data.msg),t.getOrderList();case 12:case"end":return r.stop()}},r,t)}))()},redirectToAddOrderPage:function(){this.$router.push("/orders/add")}}},le={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("订单管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("订单列表")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入部分订单编号或所需条件",clearable:""},on:{clear:e.getOrderList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getOrderList.apply(null,arguments)}},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getOrderList},slot:"append"})],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getOrderList},model:{value:e.queryInfo.category,callback:function(t){e.$set(e.queryInfo,"category",t)},expression:"queryInfo.category"}},e._l(e.options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.redirectToAddOrderPage}},[e._v("新建订单")])],1)],1),e._v(" "),r("el-table",{attrs:{data:e.orderList,stripe:""}},[r("el-table-column",{attrs:{width:"50px",label:"ID",prop:"id"}}),e._v(" "),r("el-table-column",{attrs:{label:"订单编号",prop:"number"}}),e._v(" "),r("el-table-column",{attrs:{label:"运输单号",prop:"courier_number",width:"200px"}}),e._v(" "),r("el-table-column",{attrs:{label:"承运用户",prop:"username"}}),e._v(" "),r("el-table-column",{attrs:{label:"承运车辆",prop:"license"}}),e._v(" "),r("el-table-column",{attrs:{label:"货物名称",prop:"goodsname"}}),e._v(" "),r("el-table-column",{attrs:{label:"出发城市",prop:"from_city"}}),e._v(" "),r("el-table-column",{attrs:{label:"到达城市",prop:"to_city"}}),e._v(" "),r("el-table-column",{attrs:{label:"是否出发"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.courier_status?r("el-tag",{attrs:{type:"success"}},[e._v("已出发")]):e._e(),e._v(" "),0==t.row.courier_status?r("el-tag",{attrs:{type:"danger"}},[e._v("未出发")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"是否到达"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?r("el-tag",{attrs:{type:"success"}},[e._v("已到达")]):e._e(),e._v(" "),0==t.row.status?r("el-tag",{attrs:{type:"danger"}},[e._v("未到达")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"创建时间",prop:"created_at"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"success",icon:"el-icon-position",size:"mini"},on:{click:function(r){return e.showViewLogisticsDialog(t.row)}}}),e._v(" "),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteOrder(t.row.id)}}})]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,25,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.orderListSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),r("el-dialog",{attrs:{title:"物流信息",visible:e.viewLogisticsDialogVisible,width:"40%"},on:{"update:visible":function(t){e.viewLogisticsDialogVisible=t},close:e.viewLogisticsCloseDialog}},[r("el-timeline",e._l(e.LogisticsInfo,function(t,a){return r("el-timeline-item",{key:a,attrs:{timestamp:t.time}},[e._v("\n                "+e._s(t.context)+"\n            ")])}),1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.viewLogisticsDialogVisible=!1}}},[e._v("关 闭")])],1)],1)],1)},staticRenderFns:[]};var ue=r("VU/8")(ie,le,!1,function(e){r("c/0B")},"data-v-165b14bc",null).exports,ce={data:function(){return{queryInfo:{query:"",pagesize:10,pagenum:1,status:"deleted"},orderList:[],orderListSize:0,editOrderDialogVisible:!1,editOrderFormRules:{address1:[{required:!0,message:"请填写省市区",trigger:"blur"}],address2:[{required:!0,message:"请填写地址",trigger:"blur"}]},editOrderForm:{address1:"",address2:""},currentOrder:{},viewLogisticsDialogVisible:!1,LogisticsInfo:[]}},created:function(){this.getOrderList()},methods:{handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getOrderList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getOrderList()},getOrderList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("orders",{params:e.queryInfo});case 2:if(r=t.sent,console.log(r),200===r.data.code){t.next=6;break}return t.abrupt("return",e.$message.error(r.data.msg));case 6:e.$message.success(r.data.msg),e.orderList=r.data.data.orders,e.orderListSize=r.data.data.total;case 9:case"end":return t.stop()}},t,e)}))()},recoverOrder:function(e){var t=this;return p()(c.a.mark(function r(){var a;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("此操作将恢复该订单信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(e){return e});case 2:if("confirm"===r.sent){r.next=5;break}return r.abrupt("return",t.$message.info("取消恢复订单信息"));case 5:return r.next=7,t.$http.patch("/orders/"+e+"/recover");case 7:if(201===(a=r.sent).data.code){r.next=10;break}return r.abrupt("return",t.$message.error(a.data.msg));case 10:t.$message.success(a.data.msg),t.getOrderList();case 12:case"end":return r.stop()}},r,t)}))()}}},de={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("订单管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("查询订单")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入部分订单编号",clearable:""},on:{clear:e.getOrderList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getOrderList},slot:"append"})],1)],1)],1),e._v(" "),r("el-table",{attrs:{data:e.orderList,stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#"}}),e._v(" "),r("el-table-column",{attrs:{label:"ID",prop:"id"}}),e._v(" "),r("el-table-column",{attrs:{label:"订单编号",prop:"number"}}),e._v(" "),r("el-table-column",{attrs:{label:"运输单号",prop:"courier_number",width:"200px"}}),e._v(" "),r("el-table-column",{attrs:{label:"承运用户",prop:"username"}}),e._v(" "),r("el-table-column",{attrs:{label:"承运车辆",prop:"license"}}),e._v(" "),r("el-table-column",{attrs:{label:"货物名称",prop:"goodsname"}}),e._v(" "),r("el-table-column",{attrs:{label:"出发城市",prop:"from_city"}}),e._v(" "),r("el-table-column",{attrs:{label:"到达城市",prop:"to_city"}}),e._v(" "),r("el-table-column",{attrs:{label:"是否出发"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.courier_status?r("el-tag",{attrs:{type:"success"}},[e._v("已出发")]):e._e(),e._v(" "),0==t.row.courier_status?r("el-tag",{attrs:{type:"danger"}},[e._v("未出发")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"是否到达"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?r("el-tag",{attrs:{type:"success"}},[e._v("已到达")]):e._e(),e._v(" "),0==t.row.status?r("el-tag",{attrs:{type:"danger"}},[e._v("未到达")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"下单时间",prop:"created_at"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.recoverOrder(t.row.id)}}})]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,25,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.orderListSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var pe=r("VU/8")(ce,de,!1,function(e){r("LVyx")},"data-v-09ff656c",null).exports,me={data:function(){return{orderID:null,orderList:[],orderListSize:0,currentOrder:{},viewLogisticsDialogVisible:!1,LogisticsInfo:[]}},methods:{getOrderList:function(){var e=this;return p()(c.a.mark(function t(){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.orderList.splice(0,e.orderList.length),t.next=3,e.$http.get("orders/"+e.orderID);case 3:if(r=t.sent,console.log(r),200===r.data.code){t.next=7;break}return t.abrupt("return",e.$message.error(r.data.msg));case 7:e.$message.success(r.data.msg),e.orderList.push(r.data.data);case 9:case"end":return t.stop()}},t,e)}))()},viewLogisticsCloseDialog:function(){this.viewLogisticsDialogVisible=!1},showViewLogisticsDialog:function(e){var t=this;return p()(c.a.mark(function e(){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.viewLogisticsDialogVisible=!0,e.next=3,t.$http.get("/kuaidi/1106975712662");case 3:if(r=e.sent,console.log(r),200===r.data.meta.status){e.next=7;break}return e.abrupt("return",t.$message.error(r.data.msg));case 7:t.$message.success(r.data.msg),t.LogisticsInfo=r.data.data;case 9:case"end":return e.stop()}},e,t)}))()}}},ge={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("订单管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("恢复订单")])],1),e._v(" "),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入订单 ID",clearable:""},on:{clear:e.getOrderList},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getOrderList.apply(null,arguments)}},model:{value:e.orderID,callback:function(t){e.orderID=t},expression:"orderID"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getOrderList},slot:"append"})],1)],1)],1),e._v(" "),r("el-table",{attrs:{data:e.orderList,stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#"}}),e._v(" "),r("el-table-column",{attrs:{label:"ID",prop:"id"}}),e._v(" "),r("el-table-column",{attrs:{label:"订单编号",prop:"number"}}),e._v(" "),r("el-table-column",{attrs:{label:"运输单号",prop:"courier_number",width:"200px"}}),e._v(" "),r("el-table-column",{attrs:{label:"承运用户",prop:"username"}}),e._v(" "),r("el-table-column",{attrs:{label:"承运车辆",prop:"license"}}),e._v(" "),r("el-table-column",{attrs:{label:"货物名称",prop:"goodsname"}}),e._v(" "),r("el-table-column",{attrs:{label:"出发城市",prop:"from_city"}}),e._v(" "),r("el-table-column",{attrs:{label:"到达城市",prop:"to_city"}}),e._v(" "),r("el-table-column",{attrs:{label:"是否出发"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.courier_status?r("el-tag",{attrs:{type:"success"}},[e._v("已出发")]):e._e(),e._v(" "),0==t.row.courier_status?r("el-tag",{attrs:{type:"danger"}},[e._v("未出发")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"是否到达"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?r("el-tag",{attrs:{type:"success"}},[e._v("已到达")]):e._e(),e._v(" "),0==t.row.status?r("el-tag",{attrs:{type:"danger"}},[e._v("未到达")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"下单时间",prop:"created_at"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.showEditOrderDialog(t.row)}}}),e._v(" "),r("el-button",{attrs:{type:"success",icon:"el-icon-position",size:"mini"},on:{click:function(r){return e.showViewLogisticsDialog(t.row)}}})]}}])})],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"物流信息",visible:e.viewLogisticsDialogVisible,width:"40%"},on:{"update:visible":function(t){e.viewLogisticsDialogVisible=t},close:e.viewLogisticsCloseDialog}},[r("el-timeline",e._l(e.LogisticsInfo,function(t,a){return r("el-timeline-item",{key:a,attrs:{timestamp:t.time}},[e._v("\n                "+e._s(t.context)+"\n            ")])}),1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.viewLogisticsDialogVisible=!1}}},[e._v("关 闭")])],1)],1)],1)},staticRenderFns:[]};var fe=r("VU/8")(me,ge,!1,function(e){r("26iA")},"data-v-d63a3c98",null).exports;a.default.use(l.a);var be=new l.a({routes:[{path:"/",redirect:"/login"},{path:"/login",component:f},{path:"/home",component:y,redirect:"/welcome",children:[{path:"/welcome",component:k},{path:"/users",component:L},{path:"/recoverusers",component:F},{path:"/queryusers",component:D},{path:"/cars",component:O},{path:"/recovercars",component:V},{path:"/querycars",component:B},{path:"/roles",component:A},{path:"/wips",component:M},{path:"/admins",component:J},{path:"/goods",component:ae},{path:"/querygoods",component:Q},{path:"/recovergoods",component:ee},{path:"/orders/add",component:oe},{path:"/orders",component:ue},{path:"/recoverorders",component:pe},{path:"/queryorders",component:fe}]}]});be.beforeEach(function(e,t,r){return"/login"===e.path?r():window.sessionStorage.getItem("token")?void r():r("/login")});var ve=be,ye=(r("J373"),r("mtWM")),_e=r.n(ye),he=r("Y81h"),ke=r.n(he);r("UVIz");_e.a.defaults.baseURL="http://127.0.0.1:8888/api/v1/",_e.a.interceptors.request.use(function(e){return ke.a.start(),e.headers.Authorization="Bearer "+window.sessionStorage.getItem("token"),e}),_e.a.interceptors.response.use(function(e){return ke.a.done(),e}),a.default.prototype.$http=_e.a,a.default.config.productionTip=!1,a.default.use(i.a),a.default.filter("dataFormat",function(e){var t=new Date(e);return t.getFullYear()+"/"+(t.getMonth()+1+"").padStart(2,"0")+"/"+(t.getDate()+"").padStart(2,"0")+" "+(t.getHours()+"").padStart(2,"0")+":"+(t.getMinutes()+"").padStart(2,"0")+":"+(t.getSeconds()+"").padStart(2,"0")}),new a.default({el:"#app",router:ve,components:{App:n},template:"<App/>"})},UVIz:function(e,t){},UeMn:function(e,t){},UkJ5:function(e,t){},Vpw8:function(e,t){},"c/0B":function(e,t){},"h+FY":function(e,t){},iGOg:function(e,t){},pZpN:function(e,t){},qaay:function(e,t){},s7N8:function(e,t){},tBG6:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f5d232f28bf09229166c.js.map